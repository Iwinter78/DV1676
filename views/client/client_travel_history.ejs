<%- include('../../public/header.ejs') %>

<h1 class="text-center">Resehistorik för <%= login %></h1>

<% if (trips && trips.length > 0) { %>
    <table class="table table-light table-striped">
        <thead>
            <tr>
                <th>Tid</th>
                <th>Händelse</th>
            </tr>
        </thead>
        <tbody>
            <% trips.forEach(trip => { %>
                <tr>
                    <td><%= trip.log_time %></td>
                    <td>
                        <% 
                            let logData = trip.log_data;
                            let cityNames = { 1: 'Karlskrona', 2: 'Stockholm', 3: 'Malmö' };
                            let cityMatch = logData.match(/City: (\d+)/);
                            if (cityMatch) {
                                let cityNumber = parseInt(cityMatch[1]);
                                let cityName = cityNames[cityNumber] || cityMatch[1];
                                logData = logData.replace(/City: \d+/, `City: ${cityName}`);
                            }
                        %>
                        <%= logData %>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
<% } else { %>
    <p class="text-center">Det finns inga loggar att visa.</p>
<% } %>

<%- include('../../public/footer.ejs') %>
